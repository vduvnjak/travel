// generated Wed Aug 11 16:55:25 EDT 2010

var R9CalDayOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var R9CalDaysInMonth=[31,0,31,30,31,30,31,31,30,31,30,31];var R9CalMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var R9CalMonthRecords=[];function R9Cal_getDaysInMonth(m,y){if(m==2){return(y%4==0)?29:28}return R9CalDaysInMonth[m-1]}function R9Cal(){this.dayOffset=0;this.lastDay=0;this.monthShown=-100;this.totalMonths=0;this.monthsDomID;this.firstYear=0;this.lastYear=0;this.firstMonthAllowed=0;this.lastMonthAllowed=0;this.thisYear=0;this.thisMonth=0;this.thisDay=0;this.allowPast=false;this.monthWidth=0;this.highlighted={year:0,month:0,day:0};this.marked={year:0,month:0,day:0};return true}SCOPE=(function(){function supportsInnerText(){var e=document.createElement("p");return(e.innerText!=undefined)}var settext;if(supportsInnerText()){settext=function(node,text){node.innerText=text}}else{settext=function(node,text){node.textContent=text}}function mknode(tag,text,className){var node=document.createElement(tag);if(text){settext(node,text)}if(className){node.className=className}return node}function child(parent,tag,text,className){var node=document.createElement(tag);if(text){settext(node,text)}if(className){node.className=className}parent.appendChild(node);return node}function app(parent,node){parent.appendChild(node)}R9Cal.prototype.isOldDate=function(month,day,year){if(year<this.thisYear){return true}if(year==this.thisYear){if(month<this.thisMonth){return true}if(month==this.thisMonth){return day<this.thisDay}}return false};R9Cal.prototype.drawMonth=function(parent,monthRecord){var offset=monthRecord.firstOffset;for(var r=0;r<6;++r){var classes=r==5?"week lastWeek":"week";if(jq.browser.mozilla){classes+=" firefoxWeek"}else{if(jq.browser.msie&&jq.browser.version.substr(0,1)=="8"){classes+=" ie8Week"}}var week=mknode("div",null,classes);for(var c=0;c<7;++c){var dom,p,cls;if(offset<=0){dom=monthRecord.lastMonEnd+offset;cls="prevMon"}else{if(offset>monthRecord.thisMonEnd){dom=offset-monthRecord.thisMonEnd;cls="nextMon"}else{dom=offset;cls=null}}if(!this.allowPast&&this.isOldDate(monthRecord.month,dom,monthRecord.year)){cls="oldDate"}child(week,"p",dom,cls);++offset}app(parent,week)}};R9Cal.prototype.setupMonth=function(parent,firstOffset,lastMonEnd,thisMonEnd,month,year,isValid){var record={firstOffset:firstOffset,lastMonEnd:lastMonEnd,thisMonEnd:thisMonEnd,month:month,year:year,isValid:isValid,isDrawn:false};R9CalMonthRecords.push(record);var offset=firstOffset+6*7;this.dayOffset=(offset-thisMonEnd-1)%7-6;this.lastDay=thisMonEnd};R9Cal.prototype.makeDowHeader=function(){var dow=mknode("div",null,"dayHeader");jq.each(R9CalDayOfWeek,function(){app(dow,mknode("p",this.charAt(0)))});return dow};R9Cal.prototype.drawControls=function(parent,singleMonth){var controls=document.createElement("div");controls.className="calControls";if(singleMonth){controls.className+=" singleMonthCalControls"}var left=document.createElement("a");left.id="gotoPrev";left.href="#";jq(left).html("&laquo;");var right=document.createElement("a");right.id="gotoNext";right.href="#";jq(right).html("&raquo;");var close=document.createElement("a");close.id="closeCal";close.href="#";jq(close).html("&times;");controls.appendChild(left);controls.appendChild(close);controls.appendChild(right);parent.appendChild(controls)};R9Cal.prototype.drawMonths=function(parent,placeholder,singleMonth,startYear,endYear,allowPast){if(singleMonth==null){singleMonth=false}if(allowPast==null){allowPast=false}var dt=new Date();this.thisYear=dt.getFullYear();this.thisMonth=dt.getMonth()+1;this.thisDay=dt.getDate();this.firstYear=startYear;this.lastYear=endYear;this.totalMonths=(endYear-startYear+1)*12;this.monthShown=-100;this.allowPast=allowPast;if(allowPast==null||!allowPast){this.firstMonthAllowed=this.getMonthNum(this.thisMonth,this.thisYear);this.lastMonthAllowed=this.firstMonthAllowed+12}else{this.firstMonthAllowed=this.getMonthNum(this.thisMonth,this.firstYear);this.lastMonthAllowed=this.firstMonthAllowed+36;this.totalMonths=36}this.monthsDomID=placeholder.id;this.drawControls(parent,singleMonth);var dowHeader=this.makeDowHeader();var div=mknode("div",null);div.id=placeholder.id;div.className="months";var first=true;var monthNum=0;for(var year=startYear;year<=endYear;++year){for(var mon=0;mon<12;++mon){var container=mknode("div",null,"month");var dtid=(mon+1)+"/"+year;var dttxt=R9CalMonthNames[mon]+" "+year;container.id=dtid;var days=R9CalDaysInMonth[mon];if(mon==1){days=(year%4==0)?29:28}var header=child(container,"div",null,"calhead");child(header,"p",dttxt,"monthHeader");app(header,jq(dowHeader).clone().get(0));var inRange=monthNum>=this.firstMonthAllowed&&monthNum<=this.lastMonthAllowed;if(first){var d=new Date();d.setFullYear(year,0,1);var offset=1-d.getDay();offset+=1-1;this.setupMonth(container,offset,31,days,mon+1,year,inRange);first=false}else{this.setupMonth(container,this.dayOffset,this.lastDay,days,mon+1,year,inRange)}app(div,container);++monthNum}}parent.replaceChild(div,placeholder)};R9Cal.prototype.isIgnoredDate=function(elem){return jq(elem).is(".nextMon,.prevMon,.oldDate")};R9Cal.prototype.getDate=function(elem){var e=jq(elem);if(e.is("p")&&!this.isIgnoredDate(elem)){var week=e.parent();if(week.is(".week")){var mon=week.parent();if(mon.is(".month")){var fields=mon.attr("id").split("/");return{day:e.text(),month:fields[0],year:fields[1]}}}}return null};R9Cal.prototype.getMonthNum=function(month,year){if(year>=this.firstYear&&year<=this.lastYear){return(year-this.firstYear)*12+month-1}return -1};R9Cal.prototype.gotoMonth=function(month,year){this.gotoMonthNum(this.getMonthNum(month,year),false)};R9Cal.prototype.withDateElement=function(month,day,year,fn){var off=this.getMonthNum(month,year);if(off>=0&&day>=1){var mon=jq("div.month","#"+this.monthsDomID).eq(off);var self=this;var p=mon.find("p").filter(function(){return jq(this).text()==day&&!self.isIgnoredDate(this)});fn(p)}};R9Cal.prototype.highlightDate=function(dt,cls,month,day,year){this.withDateElement(dt.month,dt.day,dt.year,function(elem){elem.removeClass(cls)});this.withDateElement(month,day,year,function(elem){elem.addClass(cls)});dt.month=month;dt.day=day;dt.year=year};R9Cal.prototype.showNextMonth=function(){if(this.monthShown<this.lastMonthAllowed){this.gotoMonthNum(this.monthShown+1,true)}};R9Cal.prototype.showPreviousMonth=function(){if(this.monthShown>this.firstMonthAllowed){this.gotoMonthNum(this.monthShown-1,true)}};R9Cal.prototype.drawOnDemand=function(n){var record=R9CalMonthRecords[n];if(!record.isDrawn){var mon=jq("div.month","#"+this.monthsDomID).eq(n).get(0);this.drawMonth(mon,record);record.isDrawn=true}};R9Cal.prototype.gotoMonthNum=function(n,alwaysMove){if(n>=this.firstMonthAllowed&&n<=this.lastMonthAllowed){if(!alwaysMove&&this.monthShown==n-1){n=this.monthShown}if(n==this.lastMonthAllowed){--n}if(n!=this.monthShown){this.monthShown=n;this.drawOnDemand(n);this.drawOnDemand(n+1);if(!this.monthWidth){var mon=jq("div.month","#"+this.monthsDomID).get(0);this.monthWidth=mon.offsetWidth}jq("#"+this.monthsDomID).css("left",(-(this.monthWidth)*n)+"px")}}}})();var R9DatePickerNowShowing=null;function R9DatePicker(popup,iconID,dayID,dowID){this.popup=popup;this.dayID=dayID;this.dowID=dowID;this.calID=popup.frameid;this.iconID=iconID;this.onDateChanged=function(mon,day,year){if(typeof this.onChangeCB=="function"){this.onChangeCB(this)}};this.intervalID=-1;this.day=0;this.month=0;this.year=0;this.calendarFocused=false;this.domFocused=false;this.focusTimeout=-1;this.onChangeCB=null}R9DatePicker.prototype.withCal=function(fn){var frame=window.frames[this.calID];if(frame&&frame.cal){fn(frame.cal)}};R9DatePicker.prototype.frameDoc=function(){return window.frames[this.calID].document};R9DatePicker.prototype.setCalendarFocused=function(f){this.calendarFocused=f;if(f){this.domFocused=false}};R9DatePicker.prototype.setDayOfMonthFocused=function(f){this.domFocused=f;if(f){this.calendarFocused=false}};R9DatePicker.prototype.scheduleFocusCheck=function(){var self=this;var doHide=function(){if(R9DatePickerNowShowing==self.dayID&&!self.domFocused&&!self.calendarFocused){self.updateFromControls();if(self.isVisible()){self.toggle(jq("#"+self.iconID).get(0))}}};this.focusTimeout=window.setTimeout(doHide,250)};function R9DatePicker_zeroPad(n){return n<10?"0"+n:n}R9DatePicker.prototype.setEvents=function(){var picker=this;var f=window.frames[this.calID];var cal=f.cal;f.onDatePicked=function(dt){picker.popup.hide(false,function(){picker.setDate(dt.month,dt.day,dt.year);picker.onDateChanged(dt.month,dt.day,dt.year)})};f.onNextMonth=function(){cal.showNextMonth()};f.onPrevMonth=function(){cal.showPreviousMonth()};f.onCloseCal=function(){picker.popup.hide()};f.onCalendarFocus=function(){picker.setCalendarFocused(true)}};R9DatePicker.prototype.humanReadable=function(month,day,year){return R9DatePicker_zeroPad(month)+"/"+R9DatePicker_zeroPad(day)+"/"+year};R9DatePicker.prototype.parseHumanReadable=function(txt){var monthIdx;var dayIdx;monthIdx=1;dayIdx=2;var match=/\s*(\d+)[^0-9](\d+)([^0-9](\d+))?\s*/.exec(txt);var dt=null;if(match){var year=match[4]?parseInt(match[4],10):-1;dt={month:parseInt(match[monthIdx],10),day:parseInt(match[dayIdx],10),year:year}}else{return null}if(dt.year<0){var now=new Date();dt.year=(dt.month<(now.getMonth()+1))?now.getFullYear()+1:now.getFullYear()}if(dt.year<21){dt.year+=2000}if(dt.year<2000||dt.year>2020||dt.month<1||dt.month>12||dt.day<1||dt.day>31){return null}var inMonth=R9Cal_getDaysInMonth(dt.month,dt.year);if(dt.day>inMonth){return null}var validMonth=true;this.withCal(function(cal){var monNum=cal.getMonthNum(dt.month,dt.year);validMonth=monNum>=cal.firstMonthAllowed&&monNum<=cal.lastMonthAllowed});if(!validMonth){return null}return dt};R9DatePicker.prototype.setInputField=function(month,day,year){jq("#"+this.dayID).val((day&&day>0)?this.humanReadable(month,day,year):"")};R9DatePicker.prototype.setDate=function(month,day,year){day=typeof(day)=="string"?(day.length==0?-1:parseInt(day,10)):day;month=typeof(month)=="string"?parseInt(month,10):month;year=typeof(year)=="string"?parseInt(year,10):year;this.setInputField(month,day,year);this.month=month;this.day=day||-1;this.year=year;this.dateHasChanged()};R9DatePicker.prototype.setFromCanonical=function(mmddyyyy){var fields=mmddyyyy.split("/");this.setDate(fields[0],fields[1],fields[2])};R9DatePicker.prototype.setMonthYearFromCanonical=function(mmddyyyy){var fields=mmddyyyy.split("/");this.setDate(fields[0],null,fields[2])};R9DatePicker.prototype.clearDay=function(){this.setDate(this.month,null,this.year)};R9DatePicker.prototype.updateFromControls=function(){this.sync();this.setInputField(this.month,this.day,this.year);this.onDateChanged(this.month,this.day,this.year)};R9DatePicker.prototype.sync=function(forceRedisplay,ignoreHighDays){var oldday=this.day,oldmonth=this.month,oldyear=this.year;var txt=jq("#"+this.dayID).val();var mdy=this.parseHumanReadable(txt);if(mdy){this.month=mdy.month;this.day=mdy.day;this.year=mdy.year}else{this.day=-1}if(oldday!=this.day||oldyear!=this.year||oldmonth!=this.month||forceRedisplay){this.dateHasChanged()}};R9DatePicker.prototype.dateHasChanged=function(){var self=this;this.withCal(function(cal){cal.gotoMonth(self.month,self.year);cal.highlightDate(cal.highlighted,"highlighted",self.month,self.day,self.year)});var dt=this.valueAsDate();if(dt){var adjusted=(dt.getDay()-(1-1));if(adjusted<0){adjusted+=7}var dow=R9CalDayOfWeek[adjusted];var mon=R9CalMonthNames[this.month-1];var txt;txt=dow+", "+mon+" "+this.day+" "+this.year;jq("#"+this.dowID).text(txt)}else{jq("#"+this.dowID).text("mm/dd/yyyy")}};R9DatePicker.prototype.fields=function(){this.sync(false,true);return this};R9DatePicker.prototype.valueAsDate=function(defaultDay){var f=this.fields();if(f.day>0||defaultDay){var dt=new Date();dt.setDate(1);dt.setFullYear(f.year);dt.setMonth(f.month-1);dt.setDate(f.day>0?f.day:defaultDay);return dt}return null};R9DatePicker.prototype.markDate=function(fields){this.withCal(function(cal){cal.highlightDate(cal.marked,"marked",fields.month,fields.day,fields.year)})};R9DatePicker.prototype.clearMarkedDate=function(){this.withCal(function(cal){cal.highlightDate(cal.marked,"marked",0,0,0)})};R9DatePicker.prototype.toggle=function(target){if(!this.popup.isVisible()){this.setEvents();R9DatePickerNowShowing=this.dayID}else{this.clearInterval();if(this.focusTimeout!=-1){window.clearTimeout(this.focusTimeout);this.focusTimeout=-1}this.calendarFocused=false;this.domFocused=false}this.sync(true);this.popup.controllingIcon=this.iconID;this.popup.controllingInput=this.dayID;this.popup.toggle(target)};R9DatePicker.prototype.setInterval=function(){var self=this;this.intervalID=window.setInterval(function(){self.sync(false,true)},750)};R9DatePicker.prototype.clearInterval=function(){if(this.intervalID!=-1){window.clearInterval(this.intervalID);this.intervalID=-1}};R9DatePicker.prototype.isVisible=function(target){return this.popup.isVisible()};var whenFrameLoadedHook=function(){};function onCalendarLoaded(win,cal){whenFrameLoadedHook()}R9CalPopup=function(id,singleMonth,allowPast){this.posCache={};this.controllingIcon=null;this.controllingInput=null;this.isHiding=false;var container=document.createElement("div");container.className="r9calContainer";if(singleMonth){container.className+=" singleMonthCalContainer"}container.style.visibility="hidden";this.container=container;var lc="en.US";var src="/v328/h/nvtl/califrame.vtl?lc="+lc+"&singleMonth="+singleMonth+"&allowPast="+((allowPast)?"true":false);var frametext='<iframe src="'+src+'" class="calIframe" frameborder="0" scrolling="no" name="'+id+'" id="'+id+'">';jq(container).html(frametext);this.positionFunc=function(pos){pos.l-=80;pos.t+=10};this.frameid=id;var shadow=document.createElement("div");shadow.className="r9calShadow";this.shadow=shadow;container.appendChild(shadow)};function truePos(e){var l=0;var t=0;while(e&&e!=document.body){l+=e.offsetLeft;t+=e.offsetTop;e=e.offsetParent}return{l:l,t:t}}R9CalPopup.prototype.toggle=function(target){var c=jq(this.container);var hideit=(c.css("visibility")=="visible");if(hideit){var t=jq(target);if(t.is(".calicon")){var iconid="#"+this.controllingIcon;if(!t.is(iconid)&&!t.parent().is(iconid)){this.hide(true)}else{if(this.hideOnNextClick){this.hide(false);this.hideOnNextClick=false}else{this.hideOnNextClick=true}}}else{var id=target.id;if(id==this.controllingInput){return true}else{if(t.is(".calendar_dom")){this.hide(true);return true}else{this.hide(false)}}}}else{this.show(target)}return false};R9CalPopup.prototype.isVisible=function(target){return(jq(this.container).css("visibility")!="hidden")};R9CalPopup.prototype.show=function(target){var id=target.id;var pos=this.posCache[id];if(!pos||true){pos=truePos(target);pos.t+=target.offsetHeight;pos.target=target;this.positionFunc(pos);if(id){this.posCache[id]={l:pos.l,t:pos.t}}}hideMeOnPopup(true);var cs=this.container.style;cs.left=pos.l+"px";cs.top=pos.t+"px";cs.visibility="visible";var self=this;jq(document.body).mousedown(function(e){var prop=self.toggle(e.target);if(!prop){e.preventDefault();return false}return prop})};R9CalPopup.prototype.hide=function(fast,f){if(this.isHiding){return}var c=jq(this.container);if(fast||!jq.browser.firefox){this.container.style.visibility="hidden";if(f){f()}}else{this.isHiding=true;var self=this;c.hide(160,function(){c.css("visibility","hidden");c.show();if(f){f()}self.isHiding=false})}hideMeOnPopup(false);jq(document.body).unbind("mousedown")};function initDatePicker(pop,params){var picker=new R9DatePicker(pop,params.icon_id,params.input_id,params.dow_id);jq("#"+params.icon_id).click(function(e){picker.setCalendarFocused(true);picker.toggle(e.target);return true});jq("#"+params.input_id).blur(function(e){picker.clearInterval();picker.setDayOfMonthFocused(false);picker.scheduleFocusCheck();return true}).focus(function(e){picker.setDayOfMonthFocused(true);picker.setInterval();if(!picker.isVisible()){picker.toggle(jq("#"+params.icon_id).get(0))}return true});if(params.initial_date&&params.initial_date.length>0){picker.setFromCanonical(params.initial_date)}else{picker.clearDay()}if(params.chg_callback_func&&typeof params.chg_callback_func=="function"){picker.onChangeCB=params.chg_callback_func}return picker}function setCalendarLoadedHook(hook){if(hook){whenFrameLoadedHook=hook}}function R9DoubleDatePicker(firstParams,secondParams,whenLoaded,allowPast){setCalendarLoadedHook(whenLoaded);if(allowPast==null){allowPast=false}this.pop=new R9CalPopup(firstParams.calid,firstParams.singleMonth,allowPast);var first=initDatePicker(this.pop,firstParams);var second=initDatePicker(this.pop,secondParams);if(firstParams.initial_date&&firstParams.initial_date.length>0&&((!secondParams.initial_date)||secondParams.initial_date.length==0)){second.setMonthYearFromCanonical(firstParams.initial_date)}if(secondParams.initial_date&&secondParams.initial_date>0&&((!firstParams.initial_date)||firstParams.initial_date.length==0)){first.setMonthYearFromCanonical(secondParams.initial_date)}this.firstDate=this.departDate=this.checkinDate=this.pickupDate=first;this.secondDate=this.returnDate=this.checkoutDate=this.dropoffDate=second;first.onDateChanged=function(m,d,y){var dt1=first.valueAsDate();var dt2=second.valueAsDate(1);if(dt1&&dt2&&dt1>dt2){second.setDate(m,null,y)}second.markDate(first.fields());if(typeof first.onChangeCB=="function"){first.onChangeCB(this)}};second.onDateChanged=function(m,d,y){var dt1=first.valueAsDate(1);var dt2=second.valueAsDate();if(dt1&&dt2&&dt1>dt2){first.setDate(m,null,y);second.clearMarkedDate()}if(typeof second.onChangeCB=="function"){second.onChangeCB(this)}};if(document.getElementById(firstParams.calid)==null){document.body.appendChild(this.pop.container)}else{this.pop.container=document.getElementById(firstParams.calid).parentNode}};

var jsck_r9cal="v328";
// generation time: 5ms
